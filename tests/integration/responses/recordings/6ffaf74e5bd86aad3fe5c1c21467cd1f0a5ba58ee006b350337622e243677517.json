{
  "test_id": "tests/integration/responses/test_tool_responses.py::test_response_function_call_ordering_2[openai_client-txt=ollama/llama3.2:3b-instruct-fp16]",
  "request": {
    "method": "POST",
    "url": "http://0.0.0.0:11434/v1/v1/chat/completions",
    "headers": {},
    "body": {
      "model": "llama3.2:3b-instruct-fp16",
      "messages": [
        {
          "role": "user",
          "content": "Is the weather better in San Francisco or Los Angeles?"
        },
        {
          "role": "assistant",
          "tool_calls": [
            {
              "index": 0,
              "id": "call_jtdfal7a",
              "type": "function",
              "function": {
                "name": "get_weather",
                "arguments": "{\"location\":\"San Francisco\"}"
              }
            }
          ]
        },
        {
          "role": "tool",
          "tool_call_id": "call_jtdfal7a",
          "content": "It is raining."
        },
        {
          "role": "assistant",
          "tool_calls": [
            {
              "index": 0,
              "id": "call_47ac20ub",
              "type": "function",
              "function": {
                "name": "get_weather",
                "arguments": "{\"location\":\"Los Angeles\"}"
              }
            }
          ]
        },
        {
          "role": "tool",
          "tool_call_id": "call_47ac20ub",
          "content": "It is cloudy."
        }
      ],
      "parallel_tool_calls": true,
      "stream": true,
      "stream_options": {
        "include_usage": true
      },
      "tools": [
        {
          "type": "function",
          "function": {
            "type": "function",
            "name": "get_weather",
            "description": "Get current temperature for a given location.",
            "parameters": {
              "additionalProperties": false,
              "properties": {
                "location": {
                  "description": "City and country e.g. Bogot\u00e1, Colombia",
                  "type": "string"
                }
              },
              "required": [
                "location"
              ],
              "type": "object"
            },
            "strict": null
          }
        }
      ]
    },
    "endpoint": "/v1/chat/completions",
    "model": "llama3.2:3b-instruct-fp16"
  },
  "response": {
    "body": [
      {
        "__type__": "openai.types.chat.chat_completion_chunk.ChatCompletionChunk",
        "__data__": {
          "id": "rec-6ffaf74e5bd8",
          "choices": [
            {
              "delta": {
                "content": "Based on the weather information, both San Francisco and Los Angeles have their own unique weather conditions.\n\nSan Francisco has rainfall, suggesting overcast skies and potentially cooler temperatures.\n\nLos Angeles, however, is experiencing cloudiness but may not necessarily be raining. This could mean a mix of sun and clouds or even partly sunny conditions with some cloud coverage.\n\nIf you're looking for more specific details, it would be best to check the current weather conditions or forecast for both cities.",
                "function_call": null,
                "refusal": null,
                "role": "assistant",
                "tool_calls": null
              },
              "finish_reason": "stop",
              "index": 0,
              "logprobs": null
            }
          ],
          "created": 0,
          "model": "llama3.2:3b-instruct-fp16",
          "object": "chat.completion.chunk",
          "service_tier": null,
          "system_fingerprint": "fp_ollama",
          "usage": null
        }
      },
      {
        "__type__": "openai.types.chat.chat_completion_chunk.ChatCompletionChunk",
        "__data__": {
          "id": "rec-6ffaf74e5bd8",
          "choices": [],
          "created": 0,
          "model": "llama3.2:3b-instruct-fp16",
          "object": "chat.completion.chunk",
          "service_tier": null,
          "system_fingerprint": "fp_ollama",
          "usage": {
            "completion_tokens": 94,
            "prompt_tokens": 130,
            "total_tokens": 224,
            "completion_tokens_details": null,
            "prompt_tokens_details": null
          }
        }
      }
    ],
    "is_streaming": true
  },
  "id_normalization_mapping": {}
}
